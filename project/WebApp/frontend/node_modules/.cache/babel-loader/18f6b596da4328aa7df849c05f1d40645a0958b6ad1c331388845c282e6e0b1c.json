{"ast":null,"code":"var _jsxFileName = \"/home/abhi/code/project/WebApp/frontend/src/chatbot/CohereChatbot.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { addBook, updateBook, deleteBook } from '../services/bookService';\nimport { callCohere } from './cohereUtils';\nimport './chatbot.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CohereChatbot({\n  books,\n  loadBooks\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const helpReplies = {\n    add: 'To add a book, type: Add book titled \"Book Name\" by Author Name, published in 2020.',\n    delete: 'To delete a book, type: Delete book titled \"Book Name\" or by author \"Author Name\".',\n    update: 'To update a book, say: Change the title of \"Old Title\" to \"New Title\" or Update publication year of \"Book Name\" to 2020.',\n    search: 'To search for books, type: Find books by \"Author Name\" or books published after 2000.'\n  };\n  const handleSend = async () => {\n    if (!input.trim()) return;\n    const userMessage = input.trim();\n    setMessages(prev => [...prev, {\n      role: 'user',\n      text: userMessage\n    }]);\n    setInput('');\n    try {\n      var _data$title, _data$author, _data$query, _data$query$toLowerCa;\n      const result = await callCohere(userMessage);\n      console.log(\"Parsed result from Cohere:\", result);\n      const {\n        intent,\n        data\n      } = result || {};\n      const title = (data === null || data === void 0 ? void 0 : (_data$title = data.title) === null || _data$title === void 0 ? void 0 : _data$title.trim()) || '';\n      const author = (data === null || data === void 0 ? void 0 : (_data$author = data.author) === null || _data$author === void 0 ? void 0 : _data$author.trim()) || '';\n      const year = parseInt(data === null || data === void 0 ? void 0 : data.year);\n      const query = (data === null || data === void 0 ? void 0 : (_data$query = data.query) === null || _data$query === void 0 ? void 0 : (_data$query$toLowerCa = _data$query.toLowerCase) === null || _data$query$toLowerCa === void 0 ? void 0 : _data$query$toLowerCa.call(_data$query)) || '';\n\n      // Help Queries\n\n      if (intent === 'help') {\n        const helpTopics = ['add', 'delete', 'update', 'search'];\n        const helpKeyMatches = helpTopics.filter(topic => userMessage.toLowerCase().includes(topic));\n        const helpMessages = helpKeyMatches.length ? helpKeyMatches.map(k => helpReplies[k]) : ['You can ask me how to add, delete, update, or search books.'];\n        setMessages(m => [...m, {\n          role: 'bot',\n          text: helpMessages.join('\\n')\n        }]);\n        return;\n      }\n\n      // Helper to find matching book\n      const matchBook = () => books.find(b => {\n        var _b$title, _b$author;\n        return title && ((_b$title = b.title) === null || _b$title === void 0 ? void 0 : _b$title.toLowerCase()) === title.toLowerCase() || author && ((_b$author = b.author) === null || _b$author === void 0 ? void 0 : _b$author.toLowerCase()) === author.toLowerCase() || !isNaN(year) && b.year === year;\n      });\n\n      // ADD\n      if (intent === 'add') {\n        const newBook = {\n          title: title || 'Unknown',\n          author: author || 'Unknown',\n          year: !isNaN(year) ? year : 0 //new Date().getFullYear()\n        };\n        await addBook(newBook);\n        setMessages(m => [...m, {\n          role: 'bot',\n          text: `Added: \"${newBook.title}\" by ${newBook.author} (${newBook.year})`\n        }]);\n      }\n\n      // DELETE\n      else if (intent === 'delete') {\n        const book = matchBook();\n        if (book) {\n          await deleteBook(book.id);\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: `Deleted book \"${book.title}\" by ${book.author}.`\n          }]);\n        } else {\n          throw new Error('Book to delete not found.');\n        }\n      }\n\n      // UPDATE\n      else if (intent === 'update') {\n        const book = books.find(b => {\n          var _b$title2, _b$author2;\n          return title && ((_b$title2 = b.title) === null || _b$title2 === void 0 ? void 0 : _b$title2.toLowerCase()) === title.toLowerCase() || author && ((_b$author2 = b.author) === null || _b$author2 === void 0 ? void 0 : _b$author2.toLowerCase()) === author.toLowerCase() || !isNaN(year) && b.year === year;\n        });\n        if (book) {\n          var _data$fieldsToUpdate, _data$fieldsToUpdate2, _data$fieldsToUpdate3;\n          const updated = {\n            id: book.id,\n            title: ((_data$fieldsToUpdate = data.fieldsToUpdate) === null || _data$fieldsToUpdate === void 0 ? void 0 : _data$fieldsToUpdate.title) || book.title,\n            author: ((_data$fieldsToUpdate2 = data.fieldsToUpdate) === null || _data$fieldsToUpdate2 === void 0 ? void 0 : _data$fieldsToUpdate2.author) || book.author,\n            year: ((_data$fieldsToUpdate3 = data.fieldsToUpdate) === null || _data$fieldsToUpdate3 === void 0 ? void 0 : _data$fieldsToUpdate3.year) !== undefined ? data.fieldsToUpdate.year : book.year\n          };\n          await updateBook(book.id, updated);\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: `Updated book \"${updated.title}\".`\n          }]);\n        } else {\n          throw new Error('Book to update not found.');\n        }\n      }\n\n      // SEARCH\n      else if (intent === 'search') {\n        var _query$toLowerCase, _title$toLowerCase, _author$toLowerCase;\n        let results = [];\n        const lowerQuery = (query === null || query === void 0 ? void 0 : (_query$toLowerCase = query.toLowerCase) === null || _query$toLowerCase === void 0 ? void 0 : _query$toLowerCase.call(query)) || '';\n        const lowerTitleSearch = (title === null || title === void 0 ? void 0 : (_title$toLowerCase = title.toLowerCase) === null || _title$toLowerCase === void 0 ? void 0 : _title$toLowerCase.call(title)) || '';\n        const lowerAuthorSearch = (author === null || author === void 0 ? void 0 : (_author$toLowerCase = author.toLowerCase) === null || _author$toLowerCase === void 0 ? void 0 : _author$toLowerCase.call(author)) || '';\n        const isListAll = lowerQuery === 'all' || lowerQuery.includes('list all');\n        if (isListAll) {\n          results = books;\n        } else {\n          // Helper: normalize book values\n          results = books.filter(b => {\n            var _b$title3, _b$title3$toLowerCase, _b$author3, _b$author3$toLowerCas, _data$range, _data$range2;\n            const lowerTitle = ((_b$title3 = b.title) === null || _b$title3 === void 0 ? void 0 : (_b$title3$toLowerCase = _b$title3.toLowerCase) === null || _b$title3$toLowerCase === void 0 ? void 0 : _b$title3$toLowerCase.call(_b$title3)) || '';\n            const lowerAuthor = ((_b$author3 = b.author) === null || _b$author3 === void 0 ? void 0 : (_b$author3$toLowerCas = _b$author3.toLowerCase) === null || _b$author3$toLowerCas === void 0 ? void 0 : _b$author3$toLowerCas.call(_b$author3)) || '';\n            const matchExactTitle = lowerTitleSearch && lowerTitle === lowerTitleSearch;\n            const matchStartsWithTitle = lowerQuery.includes(\"start\") || lowerQuery.includes(\"begin\") ? lowerTitle.startsWith(lowerTitleSearch || lowerQuery) : false;\n            const matchTitleIncludes = lowerQuery.includes(\"title\") || lowerQuery.includes(\"having\") || lowerQuery.includes(\"with\") ? lowerTitle.includes(lowerTitleSearch || lowerQuery) : false;\n            const matchAuthor = lowerAuthorSearch && lowerAuthor.includes(lowerAuthorSearch);\n            const matchQueryAnywhere = lowerQuery && (lowerTitle.includes(lowerQuery) || lowerAuthor.includes(lowerQuery));\n            const matchYear = !isNaN(year) && b.year === year;\n            const after = (_data$range = data.range) === null || _data$range === void 0 ? void 0 : _data$range.after;\n            const before = (_data$range2 = data.range) === null || _data$range2 === void 0 ? void 0 : _data$range2.before;\n            const matchRange = (() => {\n              if (!after && !before) return false;\n              if (after && before) return b.year > after && b.year < before;\n              if (after) return b.year > after;\n              if (before) return b.year < before;\n            })();\n            return matchExactTitle ||\n            // exact match (first priority)\n            matchStartsWithTitle || matchTitleIncludes || matchAuthor || matchYear || matchRange || matchQueryAnywhere;\n          });\n\n          // ❗ Special: If an exact match exists, return only it\n          const exact = books.find(b => {\n            var _b$title4;\n            return ((_b$title4 = b.title) === null || _b$title4 === void 0 ? void 0 : _b$title4.toLowerCase()) === lowerTitleSearch;\n          });\n          if (exact && !lowerQuery.includes(\"start\") && !lowerQuery.includes(\"begin\") && !lowerQuery.includes(\"having\") && !lowerQuery.includes(\"title\")) {\n            results = [exact];\n          }\n        }\n        const noFiltersActive = !title && !author && isNaN(year) && !query && !data.range;\n        const finalResults = noFiltersActive ? books : results;\n        if (finalResults.length) {\n          const text = finalResults.map(b => `- ${b.title} by ${b.author} (${b.year})`).join('\\n');\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: `Found ${finalResults.length} book(s):\\n${text}`\n          }]);\n        } else {\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: 'No matching books found.'\n          }]);\n        }\n      }\n      await loadBooks();\n    } catch (error) {\n      console.error(\"Error handling input:\", error);\n      setMessages(m => [...m, {\n        role: 'bot',\n        text: error.message || \"Something went wrong.\"\n      }]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Ask something...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      children: messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: msg.role === 'user' ? 'chat-user' : 'chat-bot',\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [msg.role === 'user' ? 'You' : 'Bot', \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), \" \", msg.text]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: input,\n      onChange: e => setInput(e.target.value),\n      placeholder: \"Type your message...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSend,\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n_s(CohereChatbot, \"HDAtGPGcvWga1zf1TBXg51T+tsc=\");\n_c = CohereChatbot;\nexport default CohereChatbot;\nvar _c;\n$RefreshReg$(_c, \"CohereChatbot\");","map":{"version":3,"names":["React","useState","addBook","updateBook","deleteBook","callCohere","jsxDEV","_jsxDEV","CohereChatbot","books","loadBooks","_s","messages","setMessages","input","setInput","helpReplies","add","delete","update","search","handleSend","trim","userMessage","prev","role","text","_data$title","_data$author","_data$query","_data$query$toLowerCa","result","console","log","intent","data","title","author","year","parseInt","query","toLowerCase","call","helpTopics","helpKeyMatches","filter","topic","includes","helpMessages","length","map","k","m","join","matchBook","find","b","_b$title","_b$author","isNaN","newBook","book","id","Error","_b$title2","_b$author2","_data$fieldsToUpdate","_data$fieldsToUpdate2","_data$fieldsToUpdate3","updated","fieldsToUpdate","undefined","_query$toLowerCase","_title$toLowerCase","_author$toLowerCase","results","lowerQuery","lowerTitleSearch","lowerAuthorSearch","isListAll","_b$title3","_b$title3$toLowerCase","_b$author3","_b$author3$toLowerCas","_data$range","_data$range2","lowerTitle","lowerAuthor","matchExactTitle","matchStartsWithTitle","startsWith","matchTitleIncludes","matchAuthor","matchQueryAnywhere","matchYear","after","range","before","matchRange","exact","_b$title4","noFiltersActive","finalResults","error","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","msg","idx","type","value","onChange","e","target","placeholder","onClick","_c","$RefreshReg$"],"sources":["/home/abhi/code/project/WebApp/frontend/src/chatbot/CohereChatbot.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { addBook, updateBook, deleteBook } from '../services/bookService';\nimport { callCohere } from './cohereUtils';\nimport './chatbot.css';\n\nfunction CohereChatbot({ books, loadBooks }) {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n\n  const helpReplies = {\n    add: 'To add a book, type: Add book titled \"Book Name\" by Author Name, published in 2020.',\n    delete: 'To delete a book, type: Delete book titled \"Book Name\" or by author \"Author Name\".',\n    update: 'To update a book, say: Change the title of \"Old Title\" to \"New Title\" or Update publication year of \"Book Name\" to 2020.',\n    search: 'To search for books, type: Find books by \"Author Name\" or books published after 2000.'\n  };\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = input.trim();\n    setMessages(prev => [...prev, { role: 'user', text: userMessage }]);\n    setInput('');\n\n    try {\n      const result = await callCohere(userMessage);\n      console.log(\"Parsed result from Cohere:\", result);\n\n      const { intent, data } = result || {};\n      const title = data?.title?.trim() || '';\n      const author = data?.author?.trim() || '';\n      const year = parseInt(data?.year);\n      const query = data?.query?.toLowerCase?.() || '';\n      \n\n      // Help Queries\n    \n      if (intent === 'help') {\n        const helpTopics = ['add', 'delete', 'update', 'search'];\n        const helpKeyMatches = helpTopics.filter(topic =>\n          userMessage.toLowerCase().includes(topic)\n        );\n      \n        const helpMessages = helpKeyMatches.length\n          ? helpKeyMatches.map(k => helpReplies[k])\n          : ['You can ask me how to add, delete, update, or search books.'];\n      \n        setMessages(m => [...m, { role: 'bot', text: helpMessages.join('\\n') }]);\n        return;\n      }\n      \n\n\n      // Helper to find matching book\n      const matchBook = () => books.find(b =>\n        (title && b.title?.toLowerCase() === title.toLowerCase()) ||\n        (author && b.author?.toLowerCase() === author.toLowerCase()) ||\n        (!isNaN(year) && b.year === year)\n      );\n\n      // ADD\n      if (intent === 'add') {\n        const newBook = {\n          title: title || 'Unknown',\n          author: author || 'Unknown',\n          year: !isNaN(year) ? year : 0//new Date().getFullYear()\n        };\n        await addBook(newBook);\n        setMessages(m => [...m, { role: 'bot', text: `Added: \"${newBook.title}\" by ${newBook.author} (${newBook.year})` }]);\n      }\n\n      // DELETE\n      else if (intent === 'delete') {\n        const book = matchBook();\n        if (book) {\n          await deleteBook(book.id);\n          setMessages(m => [...m, { role: 'bot', text: `Deleted book \"${book.title}\" by ${book.author}.` }]);\n        } else {\n          throw new Error('Book to delete not found.');\n        }\n      }\n\n     // UPDATE\nelse if (intent === 'update') {\n  const book = books.find(b =>\n    (title && b.title?.toLowerCase() === title.toLowerCase()) ||\n    (author && b.author?.toLowerCase() === author.toLowerCase()) ||\n    (!isNaN(year) && b.year === year)\n  );\n\n  if (book) {\n    const updated = {\n      id: book.id,\n      title: data.fieldsToUpdate?.title || book.title,\n      author: data.fieldsToUpdate?.author || book.author,\n      year: data.fieldsToUpdate?.year !== undefined ? data.fieldsToUpdate.year : book.year,\n    };\n\n    await updateBook(book.id, updated);\n    setMessages(m => [...m, { role: 'bot', text: `Updated book \"${updated.title}\".` }]);\n  } else {\n    throw new Error('Book to update not found.');\n  }\n}\n\n\n// SEARCH\nelse if (intent === 'search') {\n  let results = [];\n\n  const lowerQuery = query?.toLowerCase?.() || '';\n  const lowerTitleSearch = title?.toLowerCase?.() || '';\n  const lowerAuthorSearch = author?.toLowerCase?.() || '';\n  const isListAll = lowerQuery === 'all' || lowerQuery.includes('list all');\n\n  if (isListAll) {\n    results = books;\n  } else {\n    // Helper: normalize book values\n    results = books.filter(b => {\n      const lowerTitle = b.title?.toLowerCase?.() || '';\n      const lowerAuthor = b.author?.toLowerCase?.() || '';\n\n      const matchExactTitle = lowerTitleSearch && lowerTitle === lowerTitleSearch;\n      const matchStartsWithTitle = lowerQuery.includes(\"start\") || lowerQuery.includes(\"begin\")\n        ? lowerTitle.startsWith(lowerTitleSearch || lowerQuery)\n        : false;\n      const matchTitleIncludes = lowerQuery.includes(\"title\") || lowerQuery.includes(\"having\") || lowerQuery.includes(\"with\")\n        ? lowerTitle.includes(lowerTitleSearch || lowerQuery)\n        : false;\n\n      const matchAuthor = lowerAuthorSearch && lowerAuthor.includes(lowerAuthorSearch);\n      const matchQueryAnywhere = lowerQuery && (lowerTitle.includes(lowerQuery) || lowerAuthor.includes(lowerQuery));\n      const matchYear = !isNaN(year) && b.year === year;\n      \n      const after = data.range?.after;\n      const before = data.range?.before;\n\n      const matchRange = (() => {\n        if (!after && !before) return false;\n        if (after && before) return b.year > after && b.year < before;\n        if (after) return b.year > after;\n        if (before) return b.year < before;\n      })();\n\n\n      return (\n        matchExactTitle || // exact match (first priority)\n        matchStartsWithTitle ||\n        matchTitleIncludes ||\n        matchAuthor ||\n        matchYear ||\n        matchRange ||\n        matchQueryAnywhere\n      );\n    });\n\n    // ❗ Special: If an exact match exists, return only it\n    const exact = books.find(b => b.title?.toLowerCase() === lowerTitleSearch);\n    if (exact && !lowerQuery.includes(\"start\") && !lowerQuery.includes(\"begin\") && !lowerQuery.includes(\"having\") && !lowerQuery.includes(\"title\")) {\n      results = [exact];\n    }\n  }\n\n  const noFiltersActive =\n    !title && !author && isNaN(year) && !query && !data.range;\n\n  const finalResults = noFiltersActive ? books : results;\n\n  if (finalResults.length) {\n    const text = finalResults.map(b => `- ${b.title} by ${b.author} (${b.year})`).join('\\n');\n    setMessages(m => [...m, { role: 'bot', text: `Found ${finalResults.length} book(s):\\n${text}` }]);\n  } else {\n    setMessages(m => [...m, { role: 'bot', text: 'No matching books found.' }]);\n  }\n}\n\n\n      await loadBooks();\n    } catch (error) {\n      console.error(\"Error handling input:\", error);\n      setMessages(m => [...m, { role: 'bot', text: error.message || \"Something went wrong.\" }]);\n    }\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <h3>Ask something...</h3>\n      <div className=\"chat-box\">\n        {messages.map((msg, idx) => (\n          <div key={idx} className={msg.role === 'user' ? 'chat-user' : 'chat-bot'}>\n            <strong>{msg.role === 'user' ? 'You' : 'Bot'}:</strong> {msg.text}\n          </div>\n        ))}\n      </div>\n      <input\n        type=\"text\"\n        value={input}\n        onChange={e => setInput(e.target.value)}\n        placeholder=\"Type your message...\"\n      />\n      <button onClick={handleSend}>Send</button>\n    </div>\n  );\n}\n\nexport default CohereChatbot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}