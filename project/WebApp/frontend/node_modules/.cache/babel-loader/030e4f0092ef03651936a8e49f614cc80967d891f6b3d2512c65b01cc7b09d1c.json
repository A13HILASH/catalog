{"ast":null,"code":"var _jsxFileName = \"/home/abhi/code/project/WebApp/frontend/src/chatbot/CohereChatbot.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { addBook, updateBook, deleteBook } from '../services/bookService';\nimport { callCohere } from './cohereUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CohereChatbot({\n  books,\n  loadBooks\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const fuzzyMatch = (book, query) => {\n    const titleMatch = query.title ? book.title.toLowerCase().includes(query.title.toLowerCase()) : true;\n    const authorMatch = query.author ? book.author.toLowerCase().includes(query.author.toLowerCase()) : true;\n    const yearMatch = query.year ? String(book.publicationYear) === String(query.year) : true;\n    return titleMatch && authorMatch && yearMatch;\n  };\n  const handleSend = async () => {\n    if (!input.trim()) return;\n    const userMessage = input.trim();\n    setMessages(prev => [...prev, {\n      role: 'user',\n      text: userMessage\n    }]);\n    setInput('');\n    try {\n      var _data$title, _data$title$toLowerCa, _data$author, _data$author$toLowerC;\n      const result = await callCohere(userMessage);\n      console.log(\"Parsed result from Cohere:\", result);\n      const {\n        intent,\n        data\n      } = result || {};\n      const normalizedTitle = data === null || data === void 0 ? void 0 : (_data$title = data.title) === null || _data$title === void 0 ? void 0 : (_data$title$toLowerCa = _data$title.toLowerCase) === null || _data$title$toLowerCa === void 0 ? void 0 : _data$title$toLowerCa.call(_data$title);\n      const normalizedAuthor = data === null || data === void 0 ? void 0 : (_data$author = data.author) === null || _data$author === void 0 ? void 0 : (_data$author$toLowerC = _data$author.toLowerCase) === null || _data$author$toLowerC === void 0 ? void 0 : _data$author$toLowerC.call(_data$author);\n      const parsedYear = parseInt((data === null || data === void 0 ? void 0 : data.year) || (data === null || data === void 0 ? void 0 : data.publicationYear));\n      const normalizedYear = isNaN(parsedYear) || parsedYear <= 0 ? null : parsedYear;\n\n      // ADD\n      if (intent === 'add') {\n        const newBook = {\n          title: data.title,\n          author: data.author,\n          publicationYear: normalizedYear || new Date().getFullYear()\n        };\n        await addBook(newBook);\n        setMessages(m => [...m, {\n          role: 'bot',\n          text: `Book \"${newBook.title}\" by ${newBook.author} added.`\n        }]);\n      }\n\n      // UPDATE\n      else if (intent === 'update') {\n        let bookId = data.id;\n        let book = null;\n\n        // Attempt to match book by ID (only if it's a number)\n        if (bookId && !isNaN(bookId)) {\n          book = books.find(b => b.id === Number(bookId));\n        }\n\n        // Fallback match by title, author, or year\n        if (!book) {\n          var _data$query, _data$query$toLowerCa;\n          const queryTitle = (_data$query = data.query) === null || _data$query === void 0 ? void 0 : (_data$query$toLowerCa = _data$query.toLowerCase) === null || _data$query$toLowerCa === void 0 ? void 0 : _data$query$toLowerCa.call(_data$query).replace(/^change title/i, '').trim();\n          book = books.find(b => normalizedTitle && b.title.toLowerCase() === normalizedTitle || queryTitle && b.title.toLowerCase() === queryTitle);\n        }\n\n        // Fuzzy fallback\n        if (!book && (normalizedTitle || normalizedAuthor || normalizedYear)) {\n          book = books.find(b => fuzzyMatch(b, {\n            title: normalizedTitle,\n            author: normalizedAuthor,\n            year: normalizedYear\n          }));\n        }\n        if (book) {\n          const updated = {\n            id: book.id,\n            title: data.title || book.title,\n            author: data.author || book.author,\n            publicationYear: normalizedYear || book.publicationYear\n          };\n          await updateBook(book.id, updated);\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: `Book \"${updated.title}\" updated successfully.`\n          }]);\n        } else {\n          throw new Error(\"Book to update not found.\");\n        }\n      }\n\n      // DELETE\n      else if (intent === 'delete') {\n        let bookId = data.id;\n        let book = null;\n\n        // Attempt to find by ID (only if valid number)\n        if (bookId && !isNaN(bookId)) {\n          book = books.find(b => b.id === Number(bookId));\n        }\n\n        // Fallback match by fuzzy title/author/year\n        if (!book && (normalizedTitle || normalizedAuthor || normalizedYear)) {\n          book = books.find(b => fuzzyMatch(b, {\n            title: normalizedTitle,\n            author: normalizedAuthor,\n            year: normalizedYear\n          }));\n        }\n        if (book) {\n          await deleteBook(book.id);\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: `Book \"${book.title}\" deleted.`\n          }]);\n        } else {\n          throw new Error(\"Book to delete not found.\");\n        }\n      }\n\n      // SEARCH\n      else if (intent === 'search') {\n        var _data$query2, _data$query2$toLowerC, _data$title2, _data$title2$toLowerC, _data$author2, _data$author2$toLower;\n        const query = ((_data$query2 = data.query) === null || _data$query2 === void 0 ? void 0 : (_data$query2$toLowerC = _data$query2.toLowerCase) === null || _data$query2$toLowerC === void 0 ? void 0 : _data$query2$toLowerC.call(_data$query2)) || '';\n        const title = ((_data$title2 = data.title) === null || _data$title2 === void 0 ? void 0 : (_data$title2$toLowerC = _data$title2.toLowerCase) === null || _data$title2$toLowerC === void 0 ? void 0 : _data$title2$toLowerC.call(_data$title2)) || '';\n        const author = ((_data$author2 = data.author) === null || _data$author2 === void 0 ? void 0 : (_data$author2$toLower = _data$author2.toLowerCase) === null || _data$author2$toLower === void 0 ? void 0 : _data$author2$toLower.call(_data$author2)) || '';\n        const year = normalizedYear;\n        const results = books.filter(b => {\n          var _b$title, _b$author, _b$title2, _b$author2;\n          return title && ((_b$title = b.title) === null || _b$title === void 0 ? void 0 : _b$title.toLowerCase().includes(title)) || author && ((_b$author = b.author) === null || _b$author === void 0 ? void 0 : _b$author.toLowerCase().includes(author)) || year && b.publicationYear === year || query && (((_b$title2 = b.title) === null || _b$title2 === void 0 ? void 0 : _b$title2.toLowerCase().includes(query)) || ((_b$author2 = b.author) === null || _b$author2 === void 0 ? void 0 : _b$author2.toLowerCase().includes(query)));\n        });\n        if (results.length > 0) {\n          const responseText = results.map(b => `- ${b.title} by ${b.author} (${b.publicationYear || 'Unknown'})`).join('\\n');\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: `Found ${results.length} result(s):\\n${responseText}`\n          }]);\n        } else {\n          setMessages(m => [...m, {\n            role: 'bot',\n            text: `No books found matching your query.`\n          }]);\n        }\n      }\n      await loadBooks();\n    } catch (error) {\n      console.error(\"Error handling input:\", error);\n      setMessages(m => {\n        var _error$response, _error$response$data;\n        return [...m, {\n          role: 'bot',\n          text: (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || \"Something went wrong. Try again.\"\n        }];\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Ask something...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: msg.role === 'user' ? 'chat-user' : 'chat-bot',\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [msg.role === 'user' ? 'You' : 'Bot', \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), \" \", msg.text]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: input,\n      onChange: e => setInput(e.target.value),\n      placeholder: \"Type your message...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSend,\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n}\n_s(CohereChatbot, \"HDAtGPGcvWga1zf1TBXg51T+tsc=\");\n_c = CohereChatbot;\nexport default CohereChatbot;\nvar _c;\n$RefreshReg$(_c, \"CohereChatbot\");","map":{"version":3,"names":["React","useState","addBook","updateBook","deleteBook","callCohere","jsxDEV","_jsxDEV","CohereChatbot","books","loadBooks","_s","messages","setMessages","input","setInput","fuzzyMatch","book","query","titleMatch","title","toLowerCase","includes","authorMatch","author","yearMatch","year","String","publicationYear","handleSend","trim","userMessage","prev","role","text","_data$title","_data$title$toLowerCa","_data$author","_data$author$toLowerC","result","console","log","intent","data","normalizedTitle","call","normalizedAuthor","parsedYear","parseInt","normalizedYear","isNaN","newBook","Date","getFullYear","m","bookId","id","find","b","Number","_data$query","_data$query$toLowerCa","queryTitle","replace","updated","Error","_data$query2","_data$query2$toLowerC","_data$title2","_data$title2$toLowerC","_data$author2","_data$author2$toLower","results","filter","_b$title","_b$author","_b$title2","_b$author2","length","responseText","map","join","error","_error$response","_error$response$data","response","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","msg","index","type","value","onChange","e","target","placeholder","onClick","_c","$RefreshReg$"],"sources":["/home/abhi/code/project/WebApp/frontend/src/chatbot/CohereChatbot.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { addBook, updateBook, deleteBook } from '../services/bookService';\nimport { callCohere } from './cohereUtils';\n\nfunction CohereChatbot({ books, loadBooks }) {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n\n  const fuzzyMatch = (book, query) => {\n    const titleMatch = query.title ? book.title.toLowerCase().includes(query.title.toLowerCase()) : true;\n    const authorMatch = query.author ? book.author.toLowerCase().includes(query.author.toLowerCase()) : true;\n    const yearMatch = query.year ? String(book.publicationYear) === String(query.year) : true;\n    return titleMatch && authorMatch && yearMatch;\n  };\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = input.trim();\n    setMessages(prev => [...prev, { role: 'user', text: userMessage }]);\n    setInput('');\n\n    try {\n      const result = await callCohere(userMessage);\n      console.log(\"Parsed result from Cohere:\", result);\n\n      const { intent, data } = result || {};\n      const normalizedTitle = data?.title?.toLowerCase?.();\n      const normalizedAuthor = data?.author?.toLowerCase?.();\n      const parsedYear = parseInt(data?.year || data?.publicationYear);\n      const normalizedYear = isNaN(parsedYear) || parsedYear <= 0 ? null : parsedYear;\n\n      // ADD\n      if (intent === 'add') {\n        const newBook = {\n          title: data.title,\n          author: data.author,\n          publicationYear: normalizedYear || new Date().getFullYear(),\n        };\n        await addBook(newBook);\n        setMessages(m => [...m, { role: 'bot', text: `Book \"${newBook.title}\" by ${newBook.author} added.` }]);\n      }\n\n      // UPDATE\nelse if (intent === 'update') {\n  let bookId = data.id;\n  let book = null;\n\n  // Attempt to match book by ID (only if it's a number)\n  if (bookId && !isNaN(bookId)) {\n    book = books.find(b => b.id === Number(bookId));\n  }\n\n  // Fallback match by title, author, or year\n  if (!book) {\n    const queryTitle = data.query?.toLowerCase?.().replace(/^change title/i, '').trim();\n    book = books.find(b =>\n      (normalizedTitle && b.title.toLowerCase() === normalizedTitle) ||\n      (queryTitle && b.title.toLowerCase() === queryTitle)\n    );\n  }\n\n  // Fuzzy fallback\n  if (!book && (normalizedTitle || normalizedAuthor || normalizedYear)) {\n    book = books.find(b =>\n      fuzzyMatch(b, {\n        title: normalizedTitle,\n        author: normalizedAuthor,\n        year: normalizedYear\n      })\n    );\n  }\n\n  if (book) {\n    const updated = {\n      id: book.id,\n      title: data.title || book.title,\n      author: data.author || book.author,\n      publicationYear: normalizedYear || book.publicationYear,\n    };\n    await updateBook(book.id, updated);\n    setMessages(m => [...m, { role: 'bot', text: `Book \"${updated.title}\" updated successfully.` }]);\n  } else {\n    throw new Error(\"Book to update not found.\");\n  }\n}\n\n      // DELETE\nelse if (intent === 'delete') {\n  let bookId = data.id;\n  let book = null;\n\n  // Attempt to find by ID (only if valid number)\n  if (bookId && !isNaN(bookId)) {\n    book = books.find(b => b.id === Number(bookId));\n  }\n\n  // Fallback match by fuzzy title/author/year\n  if (!book && (normalizedTitle || normalizedAuthor || normalizedYear)) {\n    book = books.find(b =>\n      fuzzyMatch(b, {\n        title: normalizedTitle,\n        author: normalizedAuthor,\n        year: normalizedYear\n      })\n    );\n  }\n\n  if (book) {\n    await deleteBook(book.id);\n    setMessages(m => [...m, { role: 'bot', text: `Book \"${book.title}\" deleted.` }]);\n  } else {\n    throw new Error(\"Book to delete not found.\");\n  }\n}\n\n\n      // SEARCH\n      else if (intent === 'search') {\n        const query = data.query?.toLowerCase?.() || '';\n        const title = data.title?.toLowerCase?.() || '';\n        const author = data.author?.toLowerCase?.() || '';\n        const year = normalizedYear;\n\n        const results = books.filter(b =>\n          (title && b.title?.toLowerCase().includes(title)) ||\n          (author && b.author?.toLowerCase().includes(author)) ||\n          (year && b.publicationYear === year) ||\n          (query && (\n            b.title?.toLowerCase().includes(query) ||\n            b.author?.toLowerCase().includes(query)\n          ))\n        );\n\n        if (results.length > 0) {\n          const responseText = results.map(b =>\n            `- ${b.title} by ${b.author} (${b.publicationYear || 'Unknown'})`\n          ).join('\\n');\n          setMessages(m => [...m, { role: 'bot', text: `Found ${results.length} result(s):\\n${responseText}` }]);\n        } else {\n          setMessages(m => [...m, { role: 'bot', text: `No books found matching your query.` }]);\n        }\n      }\n\n      await loadBooks();\n\n    } catch (error) {\n      console.error(\"Error handling input:\", error);\n      setMessages(m => [...m, {\n        role: 'bot',\n        text: error?.response?.data?.message || error.message || \"Something went wrong. Try again.\"\n      }]);\n    }\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <h3>Ask something...</h3>\n      <div className=\"chat-box\">\n        {messages.map((msg, index) => (\n          <div key={index} className={msg.role === 'user' ? 'chat-user' : 'chat-bot'}>\n            <strong>{msg.role === 'user' ? 'You' : 'Bot'}:</strong> {msg.text}\n          </div>\n        ))}\n      </div>\n      <input\n        type=\"text\"\n        value={input}\n        onChange={e => setInput(e.target.value)}\n        placeholder=\"Type your message...\"\n      />\n      <button onClick={handleSend}>Send</button>\n    </div>\n  );\n}\n\nexport default CohereChatbot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}